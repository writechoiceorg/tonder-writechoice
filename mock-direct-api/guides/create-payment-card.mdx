---
title: "Create Card Payment"
sidebarTitle: "Card Payment"
description: "Process credit and debit card payments with Tonder's Direct API"
---

# Create a Card Payment

This guide shows you how to process credit and debit card payments using Tonder's Direct API. You'll learn to handle both standard card payments and 3D Secure authentication flows.

## Overview

Card payments with Direct API give you complete control over the payment experience. You send card data (tokenized or raw if PCI compliant) directly to our API and handle the response, including any required 3D Secure authentication.

<Info>
**Prerequisites:** Before implementing card payments, make sure you have:
- Valid API credentials ([get your API keys](/mock-direct-api/authentication))
- Understanding of [tokenization](/mock-direct-api/guides/tokenize-cards) for secure card handling
- A return URL for 3D Secure redirects
</Info>

## Step 1: Prepare the Payment Request

Create your card payment request with all required fields. Always use tokenized card data when possible for enhanced security and reduced PCI compliance scope.

```json
{
  "operation_type": "payment",
  "amount": 150.00,
  "currency": "MXN",
  "customer": {
    "name": "Ana María Rodríguez",
    "email": "ana.rodriguez@email.com"
  },
  "payment_method": {
    "type": "CARD",
    "card_number": "9230-0892-4469-1474",        // Tokenized
    "cardholder_name": "c05d89b2-299c-4f93-b49a-42be00d3b64b", // Tokenized
    "cvv": "d31f0da3-0ed3-4ad8-8b68-14c2669a99a7",             // Tokenized
    "expiration_month": "e401a32e-4174-424f-9688-727005f6a80e", // Tokenized
    "expiration_year": "bd9ccc23-3d00-4109-9626-fc6581389063"  // Tokenized
  },
  "client_reference": "order-789",
  "return_url": "https://yourstore.com/payment/return"
}
```

### Required Fields

| Field | Type | Description |
|-------|------|-------------|
| `operation_type` | string | Must be `"payment"` |
| `amount` | decimal | Payment amount (e.g., `150.00`) |
| `currency` | string | Currency code (currently only `"MXN"`) |
| `customer` | object | Customer information with `name` and `email` |
| `payment_method.type` | string | Must be `"CARD"` for card payments |
| `payment_method.card_number` | string | Tokenized card number |
| `payment_method.cardholder_name` | string | Tokenized cardholder name |
| `payment_method.cvv` | string | Tokenized CVV |
| `payment_method.expiration_month` | string | Tokenized expiration month |
| `payment_method.expiration_year` | string | Tokenized expiration year |
| `client_reference` | string | Your unique transaction identifier |
| `return_url` | string | URL for 3DS redirect returns |

<Warning>
Always include a `return_url` when processing card payments. This is required for 3D Secure authentication flows.
</Warning>

## Step 2: Send the Request

Make a POST request to the unified payment endpoint:

```bash cURL
curl -X POST https://stage.tonder.io/api/v1/process/ \
  -H "Authorization: Token YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "operation_type": "payment",
    "amount": 150.00,
    "currency": "MXN",
    "customer": {
      "name": "Ana María Rodríguez",
      "email": "ana.rodriguez@email.com"
    },
    "payment_method": {
      "type": "CARD",
      "card_number": "9230-0892-4469-1474",
      "cardholder_name": "c05d89b2-299c-4f93-b49a-42be00d3b64b",
      "cvv": "d31f0da3-0ed3-4ad8-8b68-14c2669a99a7",
      "expiration_month": "e401a32e-4174-424f-9688-727005f6a80e",
      "expiration_year": "bd9ccc23-3d00-4109-9626-fc6581389063"
    },
    "client_reference": "order-789",
    "return_url": "https://yourstore.com/payment/return"
  }'
```

<CodeGroup>
```python Python
import requests

url = "https://stage.tonder.io/api/v1/process/"
headers = {
    "Authorization": "Token YOUR_API_KEY",
    "Content-Type": "application/json"
}

payload = {
    "operation_type": "payment",
    "amount": 150.00,
    "currency": "MXN",
    "customer": {
        "name": "Ana María Rodríguez",
        "email": "ana.rodriguez@email.com"
    },
    "payment_method": {
        "type": "CARD",
        "card_number": "9230-0892-4469-1474",
        "cardholder_name": "c05d89b2-299c-4f93-b49a-42be00d3b64b",
        "cvv": "d31f0da3-0ed3-4ad8-8b68-14c2669a99a7",
        "expiration_month": "e401a32e-4174-424f-9688-727005f6a80e",
        "expiration_year": "bd9ccc23-3d00-4109-9626-fc6581389063"
    },
    "client_reference": "order-789",
    "return_url": "https://yourstore.com/payment/return"
}

response = requests.post(url, headers=headers, json=payload)
print(response.json())
```

```javascript JavaScript
const response = await fetch('https://stage.tonder.io/api/v1/process/', {
  method: 'POST',
  headers: {
    'Authorization': 'Token YOUR_API_KEY',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    operation_type: 'payment',
    amount: 150.00,
    currency: 'MXN',
    customer: {
      name: 'Ana María Rodríguez',
      email: 'ana.rodriguez@email.com'
    },
    payment_method: {
      type: 'CARD',
      card_number: '9230-0892-4469-1474',
      cardholder_name: 'c05d89b2-299c-4f93-b49a-42be00d3b64b',
      cvv: 'd31f0da3-0ed3-4ad8-8b68-14c2669a99a7',
      expiration_month: 'e401a32e-4174-424f-9688-727005f6a80e',
      expiration_year: 'bd9ccc23-3d00-4109-9626-fc6581389063'
    },
    client_reference: 'order-789',
    return_url: 'https://yourstore.com/payment/return'
  })
});

const data = await response.json();
console.log(data);
```
</CodeGroup>

## Step 3: Handle the Response

Card payments can return different responses depending on whether 3D Secure authentication is required.

### Success Without 3DS

When no additional authentication is needed, you receive an immediate authorized response:

```json
{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "operation_type": "payment",
  "status": "authorized",
  "amount": 150.00,
  "currency": "MXN",
  "payment_id": 12345,
  "transaction_id": "txn_abc123",
  "created_at": "2024-07-26T10:30:00Z"
}
```

### 3D Secure Required

When 3D Secure authentication is required, the response includes redirect information:

```json
{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "status": "pending",
  "next_action": {
    "redirect_to_url": {
      "url": "https://secure.payment-provider.com/3ds/abc123",
      "return_url": "https://yourstore.com/payment/return"
    }
  }
}
```

## Step 4: Handle 3D Secure Flow

When 3D Secure is required, follow this flow:

<Steps>
  <Step title="Redirect Customer">
    Redirect your customer to the URL in `next_action.redirect_to_url.url`
  </Step>
  
  <Step title="Customer Authenticates">
    The customer completes authentication on their bank's page
  </Step>
  
  <Step title="Customer Returns">
    After authentication, the customer is redirected to your `return_url`
  </Step>
  
  <Step title="Check Final Status">
    Query the transaction status to get the final payment result
  </Step>
</Steps>

```bash Check Status
curl -X GET https://stage.tonder.io/api/v1/transactions/550e8400-e29b-41d4-a716-446655440000/ \
  -H "Authorization: Token YOUR_API_KEY"
```

## Implementation Tips

<AccordionGroup>
  <Accordion title="Security Best Practices">
    - Always use tokenized card data to reduce PCI compliance scope
    - Never store raw card data on your servers
    - Use HTTPS for all API communications
    - Implement proper error handling to avoid exposing sensitive information
    - Use webhooks to track payment status changes asynchronously
  </Accordion>

  <Accordion title="3D Secure Handling">
    - Ensure your UI can handle redirect flows smoothly
    - Save the transaction ID before redirecting
    - Handle cases where customers abandon authentication
    - Implement timeout logic for long authentication processes
  </Accordion>

  <Accordion title="Testing">
    - Use [test cards](/mock-direct-api/testing) to verify both successful and failed scenarios
    - Test 3DS flows with cards that require authentication
    - Verify your return URL handling works correctly
    - Test error scenarios and edge cases
  </Accordion>
</AccordionGroup>

## Common Error Scenarios

| Error | Cause | Solution |
|-------|-------|----------|
| `invalid_card` | Invalid card data or format | Verify tokenization was successful |
| `insufficient_funds` | Card has insufficient balance | Request customer to use different card |
| `card_declined` | Card was declined by issuer | Ask customer to contact their bank |
| `3ds_failed` | Customer failed 3DS authentication | Allow customer to retry or use different card |

## Next Steps

<CardGroup cols={2}>
  <Card title="Implement 3DS" icon="shield-check" href="/mock-direct-api/guides/implement-3ds">
    Deep dive into 3D Secure implementation
  </Card>
  <Card title="Tokenize Cards" icon="key" href="/mock-direct-api/guides/tokenize-cards">
    Learn how to tokenize card data
  </Card>
  <Card title="Refund Payment" icon="rotate-left" href="/mock-direct-api/guides/refund-card-payment">
    Process refunds for card payments
  </Card>
  <Card title="Setup Webhooks" icon="webhook" href="/mock-direct-api/guides/setup-webhooks">
    Get real-time payment notifications
  </Card>
</CardGroup>

## Related Resources

- [Card Payments Overview](/mock-direct-api/card-payments)
- [Authentication Guide](/mock-direct-api/authentication)
- [API Reference](/reference/process-transaction)
- [Testing Data](/mock-direct-api/testing)

