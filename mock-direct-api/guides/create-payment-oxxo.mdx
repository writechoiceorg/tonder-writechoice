---
title: "Create OXXO Payment"
sidebarTitle: "OXXO Payment"
description: "Generate payment vouchers for cash payments at OXXO stores"
---

# Create an OXXO Payment

This guide shows you how to generate OXXO payment vouchers using Tonder's Direct API. OXXO is Mexico's largest convenience store chain, making it ideal for customers who prefer cash payments or don't have bank accounts.

## Overview

OXXO payments work differently from card payments. Instead of processing immediately, you generate a payment voucher that your customer takes to any OXXO store to pay in cash. Once they pay, you receive a webhook notification confirming the payment.

<Info>
**When to Use OXXO:**
- Customers without bank accounts or credit cards
- E-commerce customers who prefer cash payments
- Areas with high OXXO store density
- Building trust with cash-preferred demographics
</Info>

## Step 1: Create the Payment Request

OXXO payments are simple to set up - just specify the payment type and amount:

```json
{
  "operation_type": "payment",
  "amount": 250.00,
  "currency": "MXN",
  "customer": {
    "name": "María Isabel Fernández",
    "email": "maria.fernandez@email.com"
  },
  "payment_method": {
    "type": "OXXO"
  },
  "client_reference": "order-123"
}
```

### Required Fields

| Field | Type | Description |
|-------|------|-------------|
| `operation_type` | string | Must be `"payment"` |
| `amount` | decimal | Payment amount (min: $20 MXN, max: $10,000 MXN) |
| `currency` | string | Must be `"MXN"` |
| `customer` | object | Customer information with `name` and `email` |
| `payment_method.type` | string | Must be `"OXXO"` for OXXO payments |
| `client_reference` | string | Your unique transaction identifier |

<Warning>
**OXXO Amount Limits:**
- Minimum: $20 MXN (may vary by configuration)
- Maximum: $10,000 MXN per transaction
- Daily limits may apply per customer
</Warning>

## Step 2: Send the Request

Make a POST request to create the OXXO payment voucher:

```bash cURL
curl -X POST https://stage.tonder.io/api/v1/process/ \
  -H "Authorization: Token YOUR_API_KEY" \
  -H "Content-Type: application/json" \
  -d '{
    "operation_type": "payment",
    "amount": 250.00,
    "currency": "MXN",
    "customer": {
      "name": "María Isabel Fernández",
      "email": "maria.fernandez@email.com"
    },
    "payment_method": {
      "type": "OXXO"
    },
    "client_reference": "order-123"
  }'
```

<CodeGroup>
```python Python
import requests

url = "https://stage.tonder.io/api/v1/process/"
headers = {
    "Authorization": "Token YOUR_API_KEY",
    "Content-Type": "application/json"
}

payload = {
    "operation_type": "payment",
    "amount": 250.00,
    "currency": "MXN",
    "customer": {
        "name": "María Isabel Fernández",
        "email": "maria.fernandez@email.com"
    },
    "payment_method": {
        "type": "OXXO"
    },
    "client_reference": "order-123"
}

response = requests.post(url, headers=headers, json=payload)
result = response.json()
print(f"OXXO Reference: {result['payment_instructions']['reference_code']}")
```

```javascript JavaScript
const response = await fetch('https://stage.tonder.io/api/v1/process/', {
  method: 'POST',
  headers: {
    'Authorization': 'Token YOUR_API_KEY',
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    operation_type: 'payment',
    amount: 250.00,
    currency: 'MXN',
    customer: {
      name: 'María Isabel Fernández',
      email: 'maria.fernandez@email.com'
    },
    payment_method: {
      type: 'OXXO'
    },
    client_reference: 'order-123'
  })
});

const data = await response.json();
console.log('OXXO Reference:', data.payment_instructions.reference_code);
```
</CodeGroup>

## Step 3: Handle the Response

OXXO payments start with a `pending` status and include payment instructions:

```json
{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "operation_type": "payment",
  "status": "pending",
  "amount": 250.00,
  "currency": "MXN",
  "payment_instructions": {
    "reference_code": "99900012345678",
    "barcode": "||99900012345678||",
    "store_name": "OXXO",
    "expiration_date": "2024-07-29T23:59:59Z",
    "instructions": [
      "Acude a cualquier tienda OXXO",
      "Presenta este código de barras en caja",
      "Paga exactamente $250.00 MXN en efectivo"
    ]
  },
  "voucher_pdf": "https://api.tonder.io/vouchers/abc123.pdf",
  "created_at": "2024-07-26T10:30:00Z"
}
```

### Response Fields

| Field | Description |
|-------|-------------|
| `id` | Unique transaction identifier - store this for status checking |
| `status` | Current payment status - will be `pending` initially |
| `payment_instructions.reference_code` | OXXO reference code for payment |
| `payment_instructions.barcode` | Barcode to display to customer |
| `payment_instructions.expiration_date` | When the payment voucher expires (typically 3-7 days) |
| `voucher_pdf` | URL to download the payment voucher PDF |

## Step 4: Display Payment Voucher to Customer

Create a user-friendly page that displays all necessary information:

<Steps>
  <Step title="Show the Barcode">
    Display the barcode prominently so customers can show it to the cashier
  </Step>
  
  <Step title="Include Reference Code">
    Show the reference code as backup in case the barcode can't be scanned
  </Step>
  
  <Step title="Provide Instructions">
    Use the instructions array to guide customers through the payment process
  </Step>
  
  <Step title="Highlight Expiration">
    Make sure customers know when the voucher expires
  </Step>
  
  <Step title="Offer PDF Download">
    Provide a link to download the PDF voucher for printing
  </Step>
</Steps>

### Example Voucher Display

```html
<div class="oxxo-voucher">
  <h2>Completa tu pago en OXXO</h2>
  
  <div class="barcode">
    <img src="data:image/png;base64,{BARCODE_IMAGE}" alt="Código de barras" />
    <p>Código: 99900012345678</p>
  </div>
  
  <div class="amount">
    <h3>Monto a pagar: $250.00 MXN</h3>
  </div>
  
  <div class="instructions">
    <h4>Instrucciones:</h4>
    <ol>
      <li>Acude a cualquier tienda OXXO</li>
      <li>Presenta este código de barras en caja</li>
      <li>Paga exactamente $250.00 MXN en efectivo</li>
    </ol>
  </div>
  
  <div class="expiration">
    <p><strong>Vence:</strong> 29 de julio, 2024</p>
  </div>
  
  <a href="{VOUCHER_PDF_URL}" class="download-button">
    Descargar comprobante PDF
  </a>
</div>
```

## Step 5: Track Payment Status

OXXO payments follow this status flow:

1. **`pending`** - Waiting for customer to pay at store
2. **`success`** - Cash payment received and confirmed

### Using Webhooks (Recommended)

Set up webhooks to receive real-time notifications when the customer pays:

```json Webhook Payload
{
  "event": "payment.status_changed",
  "data": {
    "id": "550e8400-e29b-41d4-a716-446655440000",
    "status": "success",
    "amount": 250.00,
    "completed_at": "2024-07-27T14:30:00Z",
    "store_location": "OXXO Colonia Roma"
  }
}
```

### Polling Status (Alternative)

If you prefer not to use webhooks, you can poll the transaction status:

```bash
curl -X GET https://stage.tonder.io/api/v1/transactions/550e8400-e29b-41d4-a716-446655440000/ \
  -H "Authorization: Token YOUR_API_KEY"
```

<Info>
**Payment Timing:** OXXO payments are typically processed 24-48 hours after the customer pays at the store. Plan your order fulfillment accordingly.
</Info>

## Best Practices

<AccordionGroup>
  <Accordion title="Customer Communication">
    - Send payment instructions via email and SMS
    - Include OXXO store locator links
    - Provide clear expiration date warnings
    - Send reminder emails before voucher expiration
    - Offer customer support for payment questions
  </Accordion>

  <Accordion title="Order Management">
    - Keep orders in "pending payment" status until confirmed
    - Have a process for handling expired payments
    - Consider offering payment extensions for loyal customers
    - Implement automatic order cancellation after expiration
  </Accordion>

  <Accordion title="Technical Implementation">
    - Generate barcode images for better user experience
    - Make vouchers mobile-friendly for easy display at stores
    - Cache PDF vouchers for faster loading
    - Implement retry logic for voucher generation
    - Use webhooks instead of polling for better efficiency
  </Accordion>
</AccordionGroup>

## Common Scenarios

| Issue | Cause | Solution |
|-------|-------|----------|
| `amount_too_high` | Exceeds $10,000 MXN limit | Split into multiple payments or use different method |
| `amount_too_low` | Below minimum threshold | Increase amount or use different payment method |
| `expired_voucher` | Customer paid after expiration | Create new payment request |
| `customer_no_show` | Customer never paid | Follow up via email/SMS or cancel order |

## Next Steps

<CardGroup cols={2}>
  <Card title="Setup Webhooks" icon="webhook" href="/mock-direct-api/guides/setup-webhooks">
    Get real-time payment notifications
  </Card>
  <Card title="Check Status" icon="magnifying-glass" href="/mock-direct-api/guides/check-transaction-status">
    Learn how to check payment status
  </Card>
  <Card title="SPEI Payments" icon="building-columns" href="/mock-direct-api/guides/create-payment-spei">
    Explore bank transfer alternative
  </Card>
  <Card title="Testing" icon="flask" href="/mock-direct-api/testing">
    Test OXXO payments in sandbox
  </Card>
</CardGroup>

## Related Resources

- [OXXO Payments Overview](/mock-direct-api/oxxo)
- [Webhooks Guide](/mock-direct-api/webhooks)
- [API Reference](/reference/process-transaction)

